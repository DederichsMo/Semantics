\documentclass[12pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[german]{babel}
\usepackage[fleqn]{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{color}
\usepackage{ebproof}
\usepackage{pdflscape}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{mathrsfs}
\usepackage{marvosym}

\newcommand{\lbr}{[\![}
\newcommand{\rbr}{]\!]}

\newcommand{\sqcupeq}{\rotatebox[origin=c]{90}{$\sqsubseteq$}}

\def\sqsupsetneq{\mathrel{\sqsupseteq\kern-0.92em\raise-0.15em\hbox{\rotatebox{313}{\scalebox{1.1}[0.75]{\(\shortmid\)}}}\scalebox{0.3}[1]{\ }}}

\newcommand\encircle[1]{
  \tikz[baseline=(X.base)] 
    \node (X) [draw, shape=circle, inner sep=0] {\strut #1};}

\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\begin{document}

\begin{center}
	\huge\textbf{Exersice Sheet 5}\\[0.5cm]
	
	\Large
	$\mathrel{\vcenter{\hbox{\rule{2cm}{0.5pt}}}}$ \textbf{Sample 				Solution} $\mathrel{\vcenter{\hbox{\rule{2cm}{0.5pt}}}}$\\[1cm]
\end{center}
	\large

	\section*{Task 1: Fusion Lemma}
	
	\subsection*{(a)}
	\centering
		\begin{tikzpicture}[->, >=stealth, line width = 0.5mm]
		\tikzstyle{input} = [font= \sffamily\large\bfseries, align=center]
		\tikzstyle{edge} = [draw, line width = 1mm, --]		
		
		\path 	( 0,  0) node[input]    (1) {$D_{1}$}
		      ++( 0, -3) node[input]    (2) {$D_{1}$}
		      ++( 3,  0) node[input]    (3) {$D_{2}$}
		      ++( 0,  3) node[input]    (4) {$D_{2}$}
		      
		       (1) edge[] node[left]  {$F$} (2)
		           edge[] node[above] {$H$} (4)
		       (2) edge[] node[below] {$H$} (3)
		       (3) edge[] node[right] {$G$} (4);
 			\end{tikzpicture}
 			
 		\begin{enumerate}
 		\item[\encircle{1}] We first prove that $G^{n}\left(\bot_{2}\right)=H\circ F^{n}\left(\bot_{1}\right)$ by induction over n.\\
 		\begin{enumerate}
 		\item[] \underline{Induction Base:}\quad\underline{$n=0$}\\[0.5cm]
 		\begin{enumerate}
 		\item[] $G^{0}\left(\bot_{2}\right)=\bot_{2}\overset{H\;\text{strict}}{=}H\left(\bot_{1}\right)=H\left(F^{0}\left(\bot_{1}\right)\right)$\\[1cm]
 		\end{enumerate}
 		\item[] \underline{Induction Hypothesis:}\\[0.5cm]
 		\begin{enumerate}
 		\item[] $G^{n}\left(\bot_{2}\right)=H\left(F^{n}\left(\bot_{1}\right)\right)$ holds for any arbitrary but fixed $n\in \mathbb{N}$.\\[1cm]
 		\end{enumerate}
 		\item[] \underline{Induction Step:}\quad\underline{$n\mapsto n+1$}\\[0.5cm]
 		\begin{enumerate}
 		\item[]
 		\begin{tabular}{ccl}
 		$G^{n+1}\left(\bot_{2}\right)$ & $=$ & $G\circ G^{n}\left(\bot_{2}\right)$\\
		& $\overset{I.H.}{=}$ & $G\circ H\circ F^{n}\left(\bot_{1}\right)$\\
		& $\overset{G\circ H=H\circ F}{=}$ & $H\circ F\circ F^{n}\left(\bot_{1}\right)$\\
		& $=$ & $H\left(F^{n+1}\left(\bot_{1}\right)\right)$
 		\end{tabular}		
 		\end{enumerate}
 		\end{enumerate}
 		\item[\encircle{2}] Now we prove that $\text{fix}\left(G\right)=H\left(\text{fix}\left(F\right)\right)$.
 		\begin{enumerate}
 		\item[]
 		\begin{tabular}{ccll}
 		$\text{fix}\left(G\right)$ & $=$ & $\sqcup\left\{G^{n}\left(\bot_{2}\right)| n\in\mathbb{N}\right\}$ & $|$ by Tarski-Knaster\\
 		& $=$ & $\sqcup\left\{H\circ F^{n}\left(\bot_{1}\right) | n\in\mathbb{N}\right\}$ & $|$ by \encircle{1}\\
 		& $=$ & $H\left(\sqcup\left\{F^{n}\left(\bot_{1}\right) | n\in\mathbb{N}\right\}\right)$ & $|$ by $H$ continuous\\
 		& $=$ & $H\left(\text{fix}\left(F\right)\right)$ & $|$ by Tarski-Knaster\\
 		\end{tabular}
 		\end{enumerate}
 		\end{enumerate}

	\subsection*{(b)}
	
	\begin{enumerate}
	\item[] Wrong!\\[1cm]
	{\centering
		\begin{tikzpicture}[->, >=stealth, line width = 0.5mm]
		\tikzstyle{input} = [font= \sffamily\large\bfseries, align=center]
		\tikzstyle{edge} = [draw, line width = 1mm, --]
		
		\path 	( 0,  0) node[input]    (1) {$D_{2}:$}
		      ++( 0, -1) node[input]    (2) {$\text{\Lightning}$}
		      ++( 0, -3) node[input]    (3) {$\cdot$}
		      ++( 0, -1) node[input]    (4) {{\color{teal}$\sqcupeq$}}
		      ++( 0, -1) node[input]    (5) {$\text{fix}\left(G\right)$}
		      ++( 0, -3) node[input]	(6) {$\bot_{2}$}
		      ++(-6,  0) node[input]	(7) {$\bot_{1}$}
		      ++( 0,  3) node[input]	(8) {$\text{fix}\left(F\right)$}
		      ++( 0,  6) node[input]	(9) {$D_{1}:$}
		      
		       (2) edge[loop right] node[right] {$G$} (2)
		       (3) edge[] node[left]  {{\color{teal}$\sqcupeq$}} node[right] {$G$} (2)
		       (5) edge[loop right] node[right] {$G$} (5)
			   (6) edge[] node[left]  {{\color{teal}$\sqcupeq$}} node[right] {$G$} (5)
			   (7) edge[] node[right] {$F$} (8)
			       edge[teal] node[above] {{\color{teal}$H$}} (3)
			   (8) edge[teal] node[above] {{\color{teal}$H$}} (2)
			       edge[loop left] node[left] {$F$} (8);
 			\end{tikzpicture}}
 	\item[] $G$, $F$, $H$ continuous\quad\checkmark
 	\item[] $H\circ F=G\circ H$\quad\checkmark
 	\item[] $H\left(\text{fix}\left(F\right)\right)=\text{\Lightning}\neq\text{fix}\left(G\right)$
	\end{enumerate}
			
	\section*{Task 2: Tarski-Kantorovich Principle}
	
	\begin{enumerate}
	\item[] Prove or disprove: Let $\left(D,\; \sqsubseteq\right)$ be a CCPO and let $F:\; D\rightarrow D$ be continuous. Moreover, let $d\in D$, such that $d\sqsubseteq F\left(d\right)$.\\
	Then $F$ has at least one fixpoint larger than $d$ and the least of those fixpoints is given by\\
	\begin{center} $\sqcup\left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}$\\[1cm]\end{center}
	
	\item[] We disprove this assumption by specifying a counterexample.\\
	We define $F$ in such a way that $d=F\left(d\right)$ but $d\neq \text{fix}\left(F\right)$.\\
	Utilising Tarski-Knaster and the definition of this partial order we get $d\sqsubseteq F\left(d\right)$ and $\sqcup\left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}=d\sqsupsetneq d$. \Lightning	
	\end{enumerate}

	\rule{18cm}{0.4pt}\vspace{1cm}

	\begin{enumerate}
	\item[] Prove or disprove: Let $\left(D,\; \sqsubseteq\right)$ be a CCPO and let $F:\; D\rightarrow D$ be continuous. Moreover, let $d\in D$, such that $d\sqsubseteq F\left(d\right)$.\\
	Then $F$ has at least one fixpoint larger or equal than $d$ and the least of those fixpoints is given by\\
	\begin{center} $\sqcup\left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}$\end{center}
	
	\item[] Let $\hat{d}:=\sqcup \left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}$.\\
	$\hat{d}$ exists, since $d\sqsubseteq F\left(d\right) \sqsubseteq F^{2}\left(d\right)\sqsubseteq \cdots$ is a chain and $D$ is a CCPO.\\
	
	$\hat{d}$ is a fixpoint since\\[0.5cm]
		\hspace*{0.5cm}\begin{tabular}{ccll}
		$F\left(\hat{d}\right)$ & $=$ & $F\left(\sqcup\left\{F^{n}\left(d\right)n\in\mathbb{N}\right\}\right)$ & \\
		& $=$ & $\sqcup\left\{F^{n+1}\left(d\right)|n\in\mathbb{N}\right\}$ & $|$ by continuity of $F$\\
		& $=$ & $\sqcup\left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}$ & $|$ $d\sqsubseteq F\left(d\right)$\\
		& $=$ & $\hat{d}$ &\\
		\end{tabular}\\[0.5cm]
		$\hat{d}$ is least fixpoint ``above'' d\\
		\hspace*{0.5cm}Let x be another fixpoint ``above'' d ``smaller'' than $\hat{d}$, i.e.\\[0.5cm]
		\hspace*{1cm}\begin{tabular}{cl}
		$\left(1\right)$ & $f\left(x\right)=x$\\
		$\left(2\right)$ & $d\sqsubseteq x$\\
		$\left(3\right)$ & $x\sqsubseteq\hat{d}$\\
		\end{tabular}\\[0.5cm]
		
		\hspace*{0.5cm}\underline{But:}\\
		\hspace*{1cm}\begin{tabular}{ccll}
		$d\sqsubseteq x$ & $\Rightarrow$ & $F\left(d\right)\sqsubseteq F\left(x\right)$ & $|$ $F$ monoton\\
		& $\Rightarrow$ & $\forall n\in\mathbb{N}\; \left(F^{n}\left(d\right)\sqsubseteq F^{n}\left(x\right)\right)$ & $|$\\
		& $\Rightarrow$ & $\sqcup\left\{F^{n}\left(d\right)|n\in\mathbb{N}\right\}\sqsubseteq\sqcup\left\{F^{n}\left(x\right)|n\in\mathbb{N}\right\}$ &\\
		& $\Rightarrow$ & $\hat{d}\sqsubseteq\sqcup\left\{F^{n}\left(x\right)|n\in\mathbb{N}\right\}$ &\\
		& $\Rightarrow$ & $\hat{d}\sqsubseteq\sqcup\left\{x|n\in\mathbb{N}\right\}=\left\{x\right\}$ & $|$ by $\left(1\right)$\\
		& $\Rightarrow$ & $\hat{d}\sqsubseteq x$ &\\
		& $\Rightarrow$ & $\hat{d}=x$ & \parbox[t]{5cm}{$|$ by $\left(3\right)$ and\\ anti-symmetry of\\ CCPO}\\
		\end{tabular}\\[0.5cm]
	\end{enumerate}

	\section*{Task 3: Complete Lattice}

	\begin{enumerate}
	\item[] Every chain is a subset\\
			Thus: Complete Lattices are chain complete partial orders (\textbf{CCPO})\\
			\quad $\Rightarrow$ Tarski-Knaster is applicable.	
	\end{enumerate}
	
\end{document}